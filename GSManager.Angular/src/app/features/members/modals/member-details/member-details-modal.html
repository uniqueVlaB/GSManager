<app-modal-base [title]="'Member Details'" (close)="closeModal()">

    <div class="modal-body">
      @if (member(); as memberData) {
        <div class="member-details">
          <div class="detail-group">
            <div class="avatar-section">
              <div class="member-avatar-large">
                {{ memberData.firstName?.charAt(0) || 'M' }}{{ memberData.lastName?.charAt(0) || 'M' }}
              </div>
            </div>
          </div>

          <div class="detail-group">
            <label class="detail-label">First Name</label>
            <div class="detail-value">{{ memberData.firstName || '—' }}</div>
          </div>

          @if (memberData.middleName) {
            <div class="detail-group">
              <label class="detail-label">Middle Name</label>
              <div class="detail-value">{{ memberData.middleName }}</div>
            </div>
          }

          <div class="detail-group">
            <label class="detail-label">Last Name</label>
            <div class="detail-value">{{ memberData.lastName || '—' }}</div>
          </div>

          <div class="detail-group">
            <label class="detail-label">Email</label>
            <div class="detail-value">
              <a [href]="'mailto:' + memberData.email" class="link">
                {{ memberData.email || '—' }}
              </a>
            </div>
          </div>

          @if (memberData.phoneNumber) {
            <div class="detail-group">
              <label class="detail-label">Phone Number</label>
              <div class="detail-value">
                <a [href]="'tel:' + memberData.phoneNumber" class="link">
                  {{ memberData.phoneNumber }}
                </a>
              </div>
            </div>
          }

          <div class="detail-group">
            <label class="detail-label">Member ID</label>
            <div class="detail-value detail-value-code">{{ memberData.id }}</div>
          </div>

          @if (memberData.plots && memberData.plots.length > 0) {
            <div class="detail-group">
              <label class="detail-label">Plot IDs</label>
              <div class="plots-list">
                @for (plot of memberData.plots; track plot.id) {
                  <div class="plot-item">{{ plot.id }}</div>
                }
              </div>
            </div>
          }

          @if (memberData.role?.id) {
            <div class="detail-group">
              <label class="detail-label">Role ID</label>
              <div class="detail-value detail-value-code">{{ memberData.role?.id }}</div>
            </div>
          }

          @if (memberData.priviledge?.id) {
            <div class="detail-group">
              <label class="detail-label">Privilege ID</label>
              <div class="detail-value detail-value-code">{{ memberData.priviledge?.id }}</div>
            </div>
          }
        </div>
      } @else {
        <div class="loading-state">
          <span class="loading-spinner"></span>
          <p>Loading member details...</p>
        </div>
      }
    </div>

    <div class="modal-footer">
      <app-button type="button" variant="secondary" (click)="closeModal()">
        Close
      </app-button>
      <app-button type="button" variant="primary" (click)="onEdit()">
        Edit Member
      </app-button>
    </div>
</app-modal-base>
